## 퀵스타트

application.yml
```yaml
riotgames:
  apiKey: apikey
```

```sh
git clone https://github.com/thdwoqor/project.git

cd project

./gradlew build

cd build/libs

nohup java -jar project-0.0.1-SNAPSHOT.jar &

```

# 요구사항

`과제에서 구현해야 하는 것은 소환사의 마지막 매치 상세 페이지 제작 입니다.`

- [X] 소환사명(YOURGG#GenG) 입력 후 가장 최근에 플레이한 매치의 상세 페이지를 보여 줍니다.
- [X] 소환사의 협곡 매치만 처리(일반, 솔랭, 자랭)

## 가산점
- 테스트 케이스 작성
- 적절한 예외처리
- 성능 최적화 처리
- 비동기 처리, 캐싱 등
- 페이지 레이아웃 디자인

# 판단

- 소환사의 마지막 매치가 소환사의 협곡이 아닐 경우 예외를 처리하는 방식도 가능하지만, 사용자 경험을 개선하기 위해 최근 10경기 중 가장 최근의 소환사의 협곡 매치를 가져오는 방식으로 수정했습니다.


- Match 데이터만으로는 챔피언, 룬, 스펠, 아이템 등의 이미지 URL을 알 수 없기 때문에, 이미지 Map<ID, URL> 데이터를 메모리에 캐싱한 후, 이를 Thymeleaf로 전달하여 이미지를 요청하는 방식으로 구현했습니다.
  - 현재 14.23.1 버전 기준으로 가정하고 구현했지만 고도화한다면 Map<VERSION,Map<ID,URL>> 형태로 캐싱해서 Match 버전에 맞는 이미지를 반환할수있을것같습니다.


- MatchDetail 데이터는 당시 게임 결과를 스냅샷 형태로 수정이나 삭제가 발생하지 않을 것이라 판단하여, AttributeConverter를 활용해 하나의 컬럼에 JSON 형식으로 저장했습니다. 
  - MatchDetail은 버전에 따라 값이 달라질 가능성이 있어 비정형 데이터에 가깝다고 생각했습니다. 추후 고도화를 진행한다면 NoSQL을 활용하는 방안도 고려할 수 있을 것 같습니다.


- 외부 API 요청은 비용이 많이 들고 의존성이 발생하기 때문에, 데이터를 요청할 때(예: 계정, 매치 등), 우선 데이터베이스에 저장된 데이터를 조회합니다. 데이터베이스에 해당 데이터가 없는 경우에만 외부 API를 호출하는 방식으로 구현했습니다.
  - 라이엇 아이디는 변경될 수 있으므로, 데이터베이스에 계정이 존재하지 않을 경우 API 요청을 통해 받아온 puuid를 통해 한번더 검색합니다. 이를 통해 기존 계정이 라이엇 아이디를 변경한 것이라면 정보를 업데이트하고, 해당 계정이 없을 경우 데이터베이스에 새롭게 저장하는 방식을 사용했습니다.


